<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Final</title>
  </head>

  <body>
    <div id="header">
      <h1 id="h1" class="text">Cancer Drug Interaction Database</h1>
      <h2 id="h2" class="text">AS.410.701 - Final Project</h2>
    </div>

    <div id="intro" class="text">
      Welcome! This is a searchable database of cancer drugs and how well they interact with different cancer cell lines. The drug-cell interaction is measured from IC50, or the concentration of drug required to inhibit 50% of cell growth. The lower the IC50, the more effective the drug is at inhibiting cell growth (i.e. a lower concentration of drug will inhibit the cell growth).
    </div>

    <div id="search_bar">
      <form method="POST" action="./search.cgi">
        <input type="text" placeholder="Enter your drug of interest here..." id="search_box" class="text" name="drug">
        <button type="submit" class="text" id="search_button">Search</button>
      </form>
    </div>

    <div id="search_output">
      <h3 id="h3" class="text">{{ drug_name }}</h3>
      <table id="table" class="table">
        <thead>
          <tr>
            <th class="text">Drug Target</th>
            <th class="text">Drug Target Pathway</th>
            <th class="text">Drug IC50 (Î¼M)</th>
            <th class="text">Cell Line Name</th>
          </tr>
        </thead>
        <tbody>
          {% for entry in sql_query|slice(0,10) %}
          <tr>
            <td class="text">{{ entry.drug_target }}</td>
            <td class="text">{{ entry.drug_target_pathway }}</td>
            <td class="text">{{ entry.ic50 }}</td>
            <td class="text">{{ entry.cell_line }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      
      <div id="loadMore">
        <button onclick="loadEntries()" id="loadButton">Load More</button>
      </div>
      
      <button id="load-more-button" class="text">Load More</button>
    </div>

    <script>
      var num_entries = {{ sql_query|length }};
      var num_loaded = 10;
      var entries = document.getElementsByClassName("entry");
      for (var i = 0; i < num_loaded; i++) {
        entries[i].style.display = "table-row";
      }
      document.getElementById("load-more-button").addEventListener("click", function() {
        num_loaded += 10;
        if (num_loaded >= num_entries) {
          document.getElementById("load-more-button").style.display = "none";
        }
        for (var i = 0; i < num_loaded && i < num_entries; i++) {
          entries[i].style.display = "table-row";
        }
      });
    </script>

  </body>

</html>
